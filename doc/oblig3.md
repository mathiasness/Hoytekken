# Rapport – innlevering 3

**Team:** _Karan med varan_ – _Sune_ – _Mathias_ – _Kristian_ – _Vetle_ – _Jonas_ – _Lauritz_

# Prosjektrapport

## 1. Roller

### 1.1. Prosjektleder

    Selv om vi ikke har utnevnt noen til denne rollen direkte, er det likevel blitt naturlig at noen har tatt på seg
    lederrollen. Mathias har hatt god oversikt over hva som skal til for å få prosjektet i mål, og dermed har han 
    fått denne rollen. Dette har utviklet seg naturlig utover prosjektet.

### 1.2. Møteleder

    Sune er fortsatt møteleder, noe som har fungert bra. Det å ha god orden og struktur i møtene, har gjort møtene 
    effektive og oversiktlig. Det har også ført til at de andre har fått konkrete opgaver å jobbe med. Vi begynte 
    også med en kort kodegjennomgang dersom noe var uklart, noe som har fungert bra.

### 1.3. Trello-ansvarlig

    Jonas regnes fortsatt som trello-ansvarlig, men alle har ansvar for å oppdatere trello med oppgaver de holder 
    på med og er ferdig med.
    Dette ser vi på som en suksess og en naturlig utvikling som har gitt oss en god måte å holde oversikt over 
    oppgaver som skal gjøres og er gjort.

### 1.4. Testansvarlig

    Denne rollen er tildelt Kristian, og han har gjort en god jobb med å øke test-coverage på prosjektet. Andre 
    har selvfølgelig også vært involvert i å lage tester, men Kristian har altså hovedansvaret for det, noe som 
    har fungert godt.

### 1.5 Lyd og grafikk

    Rollen ble tildelt til Lauritz, men har også vært noe flytende i gruppa. Vetle fikk f.eks. ansvar for å designe 
    baner, noe han har gjort strålende. Lauritz har designet spiller-figurene og animasjoner for disse, noe som har 
    vært tidkrevende og lite belønnende mtp. commits, men vi er veldig fornøyd med arbeidet hans. Lyder ble også 
    laget av begge.

### 1.6 Strukturansvarlig

    Rollen ble tildelt Vetle, men har også vært naturlig fordelt over hele gruppen. Alle har vært flinke til å holde 
    seg til git-strukturen, og har vært flinke til å lage branches for det de jobber med.
    Commits/merges har også blitt jevnere siden forrige innlevering, det er fortsatt en trend at noen commiter oftere 
    enn andre, men dette vil bare være naturlig.

### 1.7 Kodestilansvarlig

    Denne rollen er tildelt Mathias, og har fungert bra. Rollen har nå blitt mer relevant ettersom kodebasen har blitt 
    en del større. Han har dermed kommet med gode forbedringer til koden, som vi deretter har refaktorert.

## 2. Prosjektmetodikk

    Metoden som vi fortsatt benytter oss av er Kanban. Vi har brukt trello som vårt
    kanban-brett, der vi har kolonner som: Backlog, doing, review, done,
    archive og discarded. Kortene flyttes fra venstre til høyre på tavlen
    etter hvert som arbeidet skrider frem gjennom de ulike stadiene av prosessen.
    Dette gjør vi for å sikre en jevn og effektiv flyt av arbeidet gjennom prosessen.
    Ved å visualisere arbeidet og andvende WIP-grenser (work-in-progress), kan vi
    unngå overbelastning og forsinkelser. Dette har fortsatt fungert veldig bra for oss,
    og vi har hatt god oversikt over hva som skal gjøres, og hva som er gjort.
    Denne metoden sørger også for at vi har god tilbakemeldingssykluser, der vi
    har regelmessig møte en gang i uken, hvor vi vurderer kanban-brettet, fremgang
    og WIP-grenser etter behov. Det har vært naturlig for prosjektet at viktige
    funksjoner for spillet har falt på plass før grundig testing og vel-dokumentert
    kode. Dette er noe vi har prioritert med vilje, da vi mener det er viktig å ha
    en fungerende prototype som vi kan revidere, teste og forbedre senere i prosessen. 
    Dette gjør at vi reduserer tiden det tar fra en brukerhistorie er utformet til den er implementert og testet.

## 3. Gruppedynamikk

    I forbindelse med gjennomføringen av vårt prosjekt har gruppedynamikken vist
    seg å være en av de sterkeste sidene ved vårt teamarbeid. Effektiviteten og samarbeidet innad i gruppen har bidratt 
    til en positiv og engasjerende arbeidsatmosfære, noe som har vært essensielt for fremdriften og moralen i prosjektet. 
    Den positive stemningen i gruppen har også lagt grunnlaget for en kultur hvor det er lav terskel for å fremme 
    forslag til forbedringer, kreative løsninger og innovative ideer. Dette har vist seg å være en verdifull ressurs for
    prosjektets utvikling, da det oppmuntrer til åpen dialog og samarbeid. Gjennom denne tilnærmingen har vi oppnådd en
    dynamisk arbeidsprosess hvor alle teammedlemmer føler seg verdsatt og motivert til å bidra med sitt beste.

    Samlet sett har gruppedynamikken spilt en avgjørende rolle for prosjektets
    fremgang og kvalitet. Vi anser den gode stemningen og det effektive samarbeidet
    som fundamentale faktorer for vår suksess, og vil fortsette å prioritere
    disse aspektene i videre arbeid.

## 4. Kommunikasjon

    Under prosjektet har kommunikasjonen vært effektiv, spesielt gjennom bruk av Discord og Trello for å holde hverandre 
    oppdatert. Vi har hatt regelmessige møter for å diskutere fremdrift og eventuelle utfordringer, og har vært flinke til å 
    oppdatere hverandre på statusen til våre respektive oppgaver.
    Siden sist innlevering har vi innført en kort kodegjennomgang på møtene våre når det har vært noe uklart. Dette har 
    fungert bra.
    I tillegg møter vi ofte hverandre på lesesal, slik at man kan spørre og diskutere mindre ting.

## 5. Retrospektiv

    I vårt retrospektiv har vi fokusert på å evaluere prosjektstrukturen og kommunikasjonen innad i teamet. Vi har klart å 
    etablere en solid struktur gjennom bruk av Kanban og regelmessige møter, som har bidratt til en jevn arbeidsflyt og 
    effektiv oppgavehåndtering. Vår evne til å holde alle oppdatert via Discord og Trello har vært avgjørende for denne 
    suksessen.

    På forrige innlevering etterlyste vi klarere retningslinjer for dokumentasjon og deling av arbeidsprosesser. Målet da var 
    å forbedre forståelsen og effektiviteten i teamet. Dette har vi absolutt klart å gjøre.

    Ifht. commits så er det fortsatt litt skjevt fordelt, grunnene bak dette står forklart på punkt #6 om arbeidsfordeling. 
    Dette har blitt bedre og jevenere, men vi har fortsatt litt å gå på her.

## 6. Arbeidsfordeling

    Når det kommer til arbeidsfordelingen i kodebasen vår, kan fordelingen av commits fortsatt virke litt skjev. Dette var noe 
    vi kommenterte sist også, men siden den gang har det blitt mye jevnere. Det har nå kommet til det punktet hvor antall 
    commits reflekterer hyppigheten man velger å committe. Arbeidsfordelingen har jevnet seg veldig ut, og er nå på et fint 
    punkt.git c

    Andre faktorer som har spilt inn på antall commits er blant annet parprogrammering som flere av oss har gjort og features 
    som vi ikke har endt opp med å bruke.

## 7. Forbedringspunkter fra retrospektiv

    - Fortsette å jevne ut commits.
    - Fortsette å oppdatere trello ofte med oppgaver.
    - Fortsette med dokumentasjon og testing av kode.

# Krav og spesifikasjon

## Progresjon i forhold til MVP

    Vi har nå dekket alle kravene i MVP'en. Vi har også kommet et stykke forbi dette, og arbeidet går nå i hovedsak ut på å 
    forbedre features som allerede er implementert i sin enkleste form.

    Ettersom at vi har kommet forbi MVP stadiet er det ikke lenger aktuelt å endre på prioriteringsrekkefølgen for 
    MVP-kravene. Vi har heller ikke sett behovet for å legge til noen krav.

## Prioriteringer til nå

    Siden forrige innlevering har en av de høyest prioriterte oppgavene vært å forbedre test-coverage. Vi er veldig fornøyde 
    med å kunne si at vi har økt test-coverage fra 0% til nesten 70% siden forrige innlevering!

    Vi har også prioritert animasjoner høyt siden forrige innlevering. Vi har nå animasjoner for spark, slag og blokk. Disse 
    animasjonene fungerer nå som de skal, og de forbedrer helhetsopplevelsen av spillet betraktelig.

    En tredje ting som har vært viktig siden sist er implementering av power ups. Dette fungerer nå på et basic nivå.

    Vi har også lagt inn lyder som samsvarer med angrepshandlingene til spillerne.

## Prioriterte oppgaver fremover

    En av de høyeste prioriterte oppgavene den siste perioden av utviklingen vil være å få økt test-coverage til minimum 75%. 
    Vi har ikke mye igjen før vi er der, men dette vil være viktig å få ferdig den siste tiden.

    Vi vil også prioritere å rette de bugene som vi har og vet om (se avsnitt om kjente feil).

    Vi ønsker også å videreutvikle AI-spilleren. Den er nå ganske primitiv. Vi tror spillet kan bli en del kulere hvis vi får 
    til å lage en AI-spiller med litt mer intelligent og variert oppførsel.

# Produkt og kode

## Utbedring av feil

    Kjente feil vi listet opp under Oblig2:
    - Bug med kontroller bevegelse. Kommer av samtidig input left/right, hvor direction blir satt tilbake til
    static. Fikses med en getter av direction og sjekke hvilken retning spiller beveger seg.
    - Tester vil ikke kjøre.
    - Game Over skjerm kan bytte tilbake til Main menu, men restarter ikke faktisk spillet i form av å lage nye
    spillere. Fikses ved å legge til funksjonalitet for å restarte spillet.
    - Block fungerer ikke enda, må implementeres med en state for å holde en kontinuerlig block.
    - Hopping må kun tillates når man står på bakken. Nå kan man fly ved å hoppe i luften.

    Hva har vi gjort:
    - Fikset bugen i kontrolleren hvor samtidig input left/right ikke ga ønsket oppførsel. Dette fikset vi slik
    som forklart, ved å sjekke direction med en getter før vi endret tilbake til static.
    - Tester kjører som de skal, funnet en løsning som fungerer med Mock klasser i Mockito og headless application.
    - Byttet fra GameOver skjerm tilbake til Main menu kaller nå på Hoytekken::create, dette lager en ny modell,
    ny kontroller og nye skjermer. Slik blir spillet restartet riktig.
    - Block fungerer nå, implementert et lignende konsept som med ForceDirection, KeyDown endrer block til true
    og KeyUp endre block tilbake til false.
    - Implementert dobbelt hopp slik at spiller kan hoppe max to ganger. Også implementert en Collsion detector som
    håndterer alle kollisioner, spesifikt til hopping så resettes jumpcounter tilbake til 0 når spillerens
    føtter kolliderer med et annet objekt.

    Andre feil som ble oppdaget:
    - cmd linjen for å kjøre prosjektet som en jar fil hadde en skrivefeil, dette er fikset nå.

## README.md

    Readme.md er opp til dato for spesifkasjoner for å kjøre programmet.
    Programmet kompilerer og kjører på både mac os og Windows, ikke hatt mulighet
    til å teste dette på Linux, men pakke/fil struktur er sjekket for caseing mtp små/store bokstaver så spillet
    skal kompilere på Linux også.

## Klassediagram

    Klassediagram ligger her: [UML](/doc/hoytekken_uml.png)
    Vi har valgt å ta ut alle enums, for å gjøre det mer oversiktlig.

## Kode

    Prosjektet følger MVC (model-view-controller) struktur. Dette kommer med fordeler og ulemper. Vi hadde et problem med
    at vi måtte sjekke current gamestate i game-loopen for å bytte skjerm, dette er ikke optimalt. Vi har nå implementert en
    EventBus som løser dette problemet. Eventbusen gjør det også mulig å forbedre andre områder i koden, og vi vil
    bruke denne på flere steder ettersom vi ser behov for det.

    - Controller klasse håndterer alt av input.
        - Kommuniserer med modellen for og utfører handlinger på spillet basert på hvilken input som ble registrert

    - View er en består av en abstrakt superklasse, BaseScreen som extender libgdx sin Screen klasse, og subklasser.
    Hver av subklassene representerer en GameState.
        - Screen klassene tegner alt visuelt.
        - GameLoopen kommer fra render metoden, her kaller den på update i model som oppdaterer resten av mekanikken i spillet.


    - Modellen holder på alt av mekanikk og logikk i spillet. Denne kobles opp mot controller og Screeens
    med Viewable- og ControllableModelInterface som dikterer hvilke deler av prosjektet som skal ha tilgang til hvilke deler 
    av modellen.
        - Selve model klassen knytter alle components sammen.
            - Sprites -- Player, PowerUps
            - Box2d -- World generator
            - ContactListener/Collision detector som lager events hver gang objekter i Box2d physics world kolliderer

    - Hoytekken Game/ApplicationListener. Denne klassen knytter alle delene av prosjektet sammen og kjøres i main.
        - create() oppretter
            - spritebatchen for spillet
            - modellen
            - controller
            - View/Screen
            - EventBus

    - Testing. Vi har jobbet mye med testing siden forrige oblig og fått opp testcoverage, men vi har fortsatt en del kode
    som ikke er dekket av testene.
    - Alt av kode, klasser, interface, metoder, osv... er dokumentert med Javadoc. Det er potensiale til å rydde i
    koden på visse steder ved å bl.a sortere metoder etter bruksområder.

## kjente feil

    - Spillere kan klistre seg fast på siden av objekter hvis de har beveger seg mot objektet. (Usikkert om dette er
    noe vi ønsker å beholde som en feature, eller om vi ønsker endre dette slik at spilleren faller)
    - Powerups kan spawne inni platformer og ellers "unreachable" områder
    - Powerups kan gi mer en max health, mer enn max liv osv
    - Man kan slå/sparke motspiller uansett hvilken vei man ser.
    - AI faller lett av platform
    - Per nå ingen måte å endre fra 2 spiller modus til 1 spiller mot ai (Vil implementere en ekstra skjerm
    for å velge antall spillere og ønsket map)
    - Noen deler av koden i modellen kan flyttes inn i de aktuelle klassene de håndterer, controllen er også inkonsisten
    på enkelte tilfeller i forhold til kommunikasjon med modell eller direkte til spiller.
    
